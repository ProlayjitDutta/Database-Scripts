-- View: vw_sc_dept_item_disp_asis_embroidery

-- DROP VIEW vw_sc_dept_item_disp_asis_embroidery CASCADE;

CREATE OR REPLACE VIEW vw_sc_dept_item_disp_asis_embroidery AS 
 SELECT v_dept_item.category_planning_id,
    v_dept_item.product_codes,
    v_dept_item.production_type,
    v_dept_item.sc_planning_main_item_id,
    v_dept_item.plan_item_code,
    v_dept_item.transaction_id,
    v_dept_item.total_quantity,
    v_dept_item.raw_material_min_date,
    v_dept_item.raw_material_max_date,
    v_dept_item.style_item_code,
    v_dept_item.category_name,
    v_dept_item.style_item_name,
    v_dept_item.style_code,
    v_dept_item.color_code,
    v_dept_item.color,
    v_dept_item.style_item_quantity,
    v_dept_item.style_item_std_unit,
    v_dept_item.style_total_cost,
    v_embrd_details.style_ccode_id,
    v_embrd_details.item_code,
    v_embrd_details.item_name,
    v_embrd_details.item_quantity,
    v_embrd_details.item_std_unit,
    v_embrd_details.embroidery_code,
    v_embrd_details.embroidery_description,
    v_embrd_details.embroidery_photo_path,
    v_embrd_details.vendor_code,
    v_embrd_details.embrd_std_unit,
    v_embrd_details.fabric_code,
    v_embrd_details.fabric_base_colour,
    v_embrd_details.fabric_metre,
    v_embrd_details.fabric_inches,
    v_embrd_details.fabric_pcs,
    v_embrd_details.material_reference,
    v_embrd_details.metre,
    v_embrd_details.pcs,
    v_embrd_details.embroidery_set,
    v_embrd_details.line,
    v_embrd_details.length_inch1,
    v_embrd_details.width_inch2,
    v_embrd_details.height_inch3,
    v_embrd_details.total_measurement,
    v_embrd_details.total_cost,
    sc_asis_embrd.sc_asis_plan_embrd_item_id,
    sc_asis_embrd.transaction_id AS embrd_trans_id,
    sc_asis_embrd.embroidery_total_metre AS asis_embroidery_total_metre,
    sc_asis_embrd.embroidery_total_pcs AS asis_embroidery_total_pcs,
    sc_asis_embrd.embroidery_total_set AS asis_embroidery_total_set,
    sc_asis_embrd.embroidery_total_line AS asis_embroidery_total_line,
    sc_asis_embrd.embroidery_total_length_inch1 AS asis_embroidery_total_length_inch1,
    sc_asis_embrd.embroidery_total_width_inch2 AS asis_embroidery_total_width_inch2,
    sc_asis_embrd.embroidery_total_height_inch3 AS asis_embroidery_total_height_inch3,
    sc_asis_embrd.embroidery_total_measurement AS asis_embroidery_total_measurement,
    sc_asis_embrd.embroidery_issue_min_date,
    sc_asis_embrd.embroidery_issue_max_date,
    sc_asis_embrd.embroidery_delivery_min_date,
    sc_asis_embrd.embroidery_delivery_max_date,
    item_fabric_details.fabric_name,
    sc_asis_embrd.custom,
    sc_asis_embrd.dept_changed,    
    sc_asis_embrd.sent_for_approval,
    v_dept_item.item_approved
   FROM vw_sc_dept_item_disp v_dept_item
     LEFT JOIN sc_category_planning_items_asis_embroidery sc_asis_embrd ON v_dept_item.sc_planning_main_item_id = sc_asis_embrd.sc_planning_main_item_id
     LEFT JOIN vw_style_ccode_item_embroidery_details v_embrd_details ON v_embrd_details.item_code::text = v_dept_item.plan_item_code::text
     LEFT JOIN vw_style_ccode_item_fabric_details item_fabric_details ON item_fabric_details.item_code::text = v_dept_item.plan_item_code::text;

ALTER TABLE vw_sc_dept_item_disp_asis_embroidery
  OWNER TO postgres;
