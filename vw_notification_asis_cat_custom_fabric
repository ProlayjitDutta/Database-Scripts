-- View: vw_notification_asis_cat_custom_fabric

-- DROP VIEW vw_notification_asis_cat_custom_fabric;

CREATE OR REPLACE VIEW vw_notification_asis_cat_custom_fabric AS
 SELECT v_asis_fabric.category_planning_id,
    v_asis_fabric.product_codes,
    v_asis_fabric.production_type,
    v_asis_fabric.sc_planning_main_item_id,
    v_asis_fabric.plan_item_code,
    v_asis_fabric.transaction_id,
    v_asis_fabric.total_quantity,
    v_asis_fabric.raw_material_min_date,
    v_asis_fabric.raw_material_max_date,
    v_asis_fabric.style_item_code,
    v_asis_fabric.category_name,
    v_asis_fabric.style_item_name,
    v_asis_fabric.style_code,
    v_asis_fabric.color_code,
    v_asis_fabric.color,
    v_asis_fabric.style_item_quantity,
    v_asis_fabric.style_item_std_unit,
    v_asis_fabric.style_total_cost,
    v_asis_fabric.style_ccode_id,
    v_asis_fabric.item_code,
    v_asis_fabric.item_name,
    v_asis_fabric.quantity,
    v_asis_fabric.item_std_unit,
    v_asis_fabric.fabric_code,
    v_asis_fabric.fabric_name,
    v_asis_fabric.fabric_type,
    v_asis_fabric.fabric_std_unit,
    v_asis_fabric.unit_std_width,
    v_asis_fabric.length_metre,
    v_asis_fabric.width_inch,
    v_asis_fabric.shrinkage_metre,
    v_asis_fabric.pcs,
    v_asis_fabric.total_measurement,
    v_asis_fabric.sc_asis_plan_fabric_item_id,
    v_asis_fabric.fab_trans_id,
    v_asis_fabric.asis_fabric_total_length_metre,
    v_asis_fabric.asis_fabric_total_width_inch,
    v_asis_fabric.asis_fabric_total_shrinkage_metre,
    v_asis_fabric.asis_fabric_total_pcs,
    v_asis_fabric.asis_fabric_total_measurement,
    v_asis_fabric.fabric_issue_min_date,
    v_asis_fabric.fabric_issue_max_date,
    v_asis_fabric.fabric_delivery_min_date,
    v_asis_fabric.fabric_delivery_max_date,
    v_asis_fabric.sent_for_approval,
    v_asis_fabric.item_approved,
    v_asis_fabric.custom,
    v_asis_fabric.dept_changed AS asis_dept_changed,
    sub_custom.dept_changed AS cat_custom_dept_changed,
    sub_custom.cat_custom_plan_fabric_item_id,
    sub_custom.cat_custom_transaction_id,
    sub_custom.cat_custom_fabric_total_length_metre,
    sub_custom.cat_custom_fabric_total_width_inch,
    sub_custom.cat_custom_fabric_total_shrinkage_metre,
    sub_custom.cat_custom_fabric_total_pcs,
    sub_custom.cat_custom_fabric_total_measurement,
    sub_custom.cat_custom_fabric_issue_min_date,
    sub_custom.cat_custom_fabric_issue_max_date,
    sub_custom.cat_custom_fabric_delivery_min_date,
    sub_custom.cat_custom_fabric_delivery_max_date
   FROM vw_sc_dept_item_disp_asis_fabric v_asis_fabric
     LEFT JOIN ( SELECT
            cat_custom_fabric.sc_custom_plan_fabric_item_id AS cat_custom_plan_fabric_item_id,
            cat_custom_fabric.transaction_id AS cat_custom_transaction_id,
            cat_custom_fabric.dept_changed,
            cat_custom_fabric.fabric_total_length_metre AS cat_custom_fabric_total_length_metre,
            cat_custom_fabric.fabric_total_width_inch AS cat_custom_fabric_total_width_inch,
            cat_custom_fabric.fabric_total_shrinkage_metre AS cat_custom_fabric_total_shrinkage_metre,
            cat_custom_fabric.fabric_total_pcs AS cat_custom_fabric_total_pcs,
            cat_custom_fabric.fabric_total_measurement AS cat_custom_fabric_total_measurement,
            cat_custom_fabric.fabric_issue_min_date AS cat_custom_fabric_issue_min_date,
            cat_custom_fabric.fabric_issue_max_date AS cat_custom_fabric_issue_max_date,
            cat_custom_fabric.fabric_delivery_min_date AS cat_custom_fabric_delivery_min_date,
            cat_custom_fabric.fabric_delivery_max_date AS cat_custom_fabric_delivery_max_date
           FROM vw_cat_custom_fabric cat_custom_fabric) sub_custom ON sub_custom.cat_custom_transaction_id::text = v_asis_fabric.transaction_id::text;

ALTER TABLE vw_notification_asis_cat_custom_fabric
  OWNER TO postgres;
