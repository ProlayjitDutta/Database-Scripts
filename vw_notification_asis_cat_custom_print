-- View: vw_notification_asis_cat_custom_print

-- DROP VIEW vw_notification_asis_cat_custom_print;

CREATE OR REPLACE VIEW vw_notification_asis_cat_custom_print AS 
SELECT v_asis_print.category_planning_id,
v_asis_print.product_codes,
v_asis_print.production_type,
v_asis_print.sc_planning_main_item_id,
v_asis_print.plan_item_code,
v_asis_print.transaction_id,
v_asis_print.total_quantity,
v_asis_print.raw_material_min_date,
v_asis_print.raw_material_max_date,
v_asis_print.style_item_code,
v_asis_print.category_name,
v_asis_print.style_item_name,
v_asis_print.style_code,
v_asis_print.color_code,
v_asis_print.color,
v_asis_print.style_item_quantity,
v_asis_print.style_item_std_unit,
v_asis_print.style_total_cost,
v_asis_print.style_ccode_id,
v_asis_print.item_code,
v_asis_print.item_name,
v_asis_print.item_quantity,
v_asis_print.item_std_unit,
v_asis_print.print_code,
v_asis_print.printing_type,
v_asis_print.print_colour,
v_asis_print.num_screens_blocks,
v_asis_print.num_colours,
v_asis_print.print_photo,
v_asis_print.print_metre,
v_asis_print.print_inches,
v_asis_print.pcs,
v_asis_print.total_measurement,
v_asis_print.total_cost,
v_asis_print.sc_asis_plan_print_item_id,
v_asis_print.print_trans_id,
v_asis_print.asis_print_total_length_metre,
v_asis_print.asis_print_total_width_inch,
v_asis_print.asis_print_total_pcs,
v_asis_print.asis_print_total_measurement,
v_asis_print.print_issue_min_date,
v_asis_print.print_issue_max_date,
v_asis_print.print_delivery_min_date,
v_asis_print.print_delivery_max_date,
v_asis_print.custom,
v_asis_print.fabric_name,
v_asis_print.sent_for_approval,
v_asis_print.item_approved,
v_asis_print.dept_changed AS asis_dept_changed,
sub_custom.dept_changed AS cat_custom_dept_changed,
sub_custom.cat_custom_plan_print_item_id,
sub_custom.cat_custom_transaction_id, 
sub_custom.cat_custom_print_total_length_metre,
sub_custom.cat_custom_print_total_width_inch,
sub_custom.cat_custom_print_total_pcs,
sub_custom.cat_custom_print_total_measurement,
sub_custom.cat_custom_print_issue_min_date,
sub_custom.cat_custom_print_issue_max_date,
sub_custom.cat_custom_print_delivery_min_date,
sub_custom.cat_custom_print_delivery_max_date
FROM vw_sc_dept_item_disp_asis_print v_asis_print
LEFT JOIN ( SELECT 
cat_custom_print.sc_custom_plan_print_item_id AS cat_custom_plan_print_item_id,
cat_custom_print.transaction_id AS cat_custom_transaction_id,
cat_custom_print.dept_changed,
cat_custom_print.print_total_length_metre AS cat_custom_print_total_length_metre,
cat_custom_print.print_total_width_inches AS cat_custom_print_total_width_inch,
cat_custom_print.print_total_pcs AS cat_custom_print_total_pcs,
cat_custom_print.print_total_measurement AS cat_custom_print_total_measurement,
cat_custom_print.print_issue_max_date AS cat_custom_print_issue_min_date,
cat_custom_print.print_issue_max_date AS cat_custom_print_issue_max_date,
cat_custom_print.print_delivery_min_date AS cat_custom_print_delivery_min_date,
cat_custom_print.print_delivery_max_date AS cat_custom_print_delivery_max_date
FROM vw_cat_custom_print cat_custom_print) sub_custom ON sub_custom.cat_custom_transaction_id::text = v_asis_print.transaction_id::text;

ALTER TABLE vw_notification_asis_cat_custom_print
OWNER TO postgres;
